{"version":3,"file":"index.js","sources":["../../src/context.ts","../../src/primitives.ts","../../src/motion.tsx","../../src/presence.tsx"],"sourcesContent":["import { createContext, onCleanup, onMount } from \"solid-js\"\nimport { MotionState } from \"@motionone/dom\"\n\nexport interface PresenceContextState {\n  addCleanup: (fn: VoidFunction) => void\n  addMount: (fn: VoidFunction) => void\n  initial: () => boolean\n}\n\nexport const defaultPresenceContextState: PresenceContextState = {\n  initial: () => true,\n  addCleanup: onCleanup,\n  addMount: onMount,\n}\nexport const ParentContext = createContext<MotionState>()\n\nexport const PresenceContext = createContext<PresenceContextState>(\n  defaultPresenceContextState\n)\n","import {\n  createMotionState,\n  createStyles,\n  MotionState,\n  style,\n} from \"@motionone/dom\"\nimport { isFunction } from \"@motionone/utils\"\nimport {\n  Accessor,\n  createEffect,\n  getOwner,\n  runWithOwner,\n  useContext,\n} from \"solid-js\"\nimport {\n  defaultPresenceContextState,\n  PresenceContext,\n  PresenceContextState,\n} from \"./context\"\nimport { Options } from \"./types\"\n\n/** @internal */\nexport function createAndBindMotionState(\n  target: Accessor<Element>,\n  options: Accessor<Options>,\n  presenceState: PresenceContextState,\n  parentState?: MotionState\n): MotionState {\n  const { addCleanup, addMount, initial } = presenceState\n\n  const state = createMotionState(\n    initial() ? options() : { ...options(), initial: false },\n    parentState\n  )\n\n  addMount(\n    runWithOwner.bind(void 0, getOwner()!, () => {\n      addCleanup(state.mount(target()))\n      createEffect(() => state.update(options()))\n    })\n  )\n\n  return state\n}\n\n/**\n * createMotion provides MotionOne as a compact Solid primitive.\n *\n * @param target Target Element to animate.\n * @param options Options to effect the animation.\n * @param presenceState Optional PresenceContext override, defaults to current parent.\n * @returns Object to access MotionState\n */\nexport function createMotion(\n  target: Element,\n  options: Options | Accessor<Options>,\n  presenceState: PresenceContextState = defaultPresenceContextState\n): MotionState {\n  const getOptions = () => (isFunction(options) ? options() : options)\n\n  const state = createAndBindMotionState(\n    () => target,\n    getOptions,\n    presenceState\n  )\n\n  const styles = createStyles(state.getTarget())\n  for (const key in styles) {\n    style.set(target, key, styles[key])\n  }\n\n  return state\n}\n\n/**\n * motion is a Solid directive that makes binding to elements easier.\n *\n * @param el Target Element to bind to.\n * @param props Options to effect the animation.\n */\nexport function motion(el: Element, props: Accessor<Options>) {\n  createMotion(el, props, useContext(PresenceContext))\n}\n","import type {\n  MotionComponentProps,\n  MotionProxy,\n  MotionProxyComponent,\n} from \"./types\"\nimport { Dynamic } from \"solid-js/web\"\nimport { useContext, splitProps, untrack, JSX } from \"solid-js\"\nimport { createStyles } from \"@motionone/dom\"\nimport { PresenceContext, ParentContext } from \"./context\"\nimport { createAndBindMotionState } from \"./primitives\"\nimport { combineStyle } from \"@solid-primitives/props\"\n\n/** @internal */\nexport const MotionComponent = (\n  props: MotionComponentProps & {\n    tag?: string\n    ref?: any\n    style?: JSX.CSSProperties | string\n  }\n) => {\n  const [options, , attrs] = splitProps(\n    props,\n    [\n      \"initial\",\n      \"animate\",\n      \"inView\",\n      \"inViewOptions\",\n      \"hover\",\n      \"press\",\n      \"variants\",\n      \"transition\",\n      \"exit\",\n    ],\n    [\n      \"tag\",\n      \"ref\",\n      \"style\",\n      \"onMotionStart\",\n      \"onMotionComplete\",\n      \"onHoverStart\",\n      \"onHoverEnd\",\n      \"onPressStart\",\n      \"onPressEnd\",\n      \"onViewEnter\",\n      \"onViewLeave\",\n    ]\n  )\n\n  const state = createAndBindMotionState(\n    () => root,\n    () => ({ ...options }),\n    useContext(PresenceContext),\n    useContext(ParentContext)\n  )\n  const style = createStyles(state.getTarget())\n\n  let root!: Element\n  return (\n    <ParentContext.Provider value={state}>\n      <Dynamic\n        ref={(el: Element) => {\n          root = el\n          props.ref?.(el)\n        }}\n        component={untrack(() => props.tag || \"div\")}\n        style={props.style ? combineStyle(props.style, style) : style}\n        on:motionstart={props.onMotionStart}\n        on:motioncomplete={props.onMotionComplete}\n        on:hoverstart={props.onHoverStart}\n        on:hoverend={props.onHoverEnd}\n        on:pressstart={props.onPressStart}\n        on:pressend={props.onPressEnd}\n        on:viewenter={props.onViewEnter}\n        on:viewleave={props.onViewLeave}\n        {...attrs}\n      />\n    </ParentContext.Provider>\n  )\n}\n\n/**\n * Renders an animatable HTML or SVG element.\n *\n * @component\n * Animation props:\n * - `animate` a target of values to animate to. Accepts all the same values and keyframes as Motion One's [animate function](https://motion.dev/dom/animate). This prop is **reactive** – changing it will animate the transition element to the new state.\n * - `transition` for changing type of animation\n * - `initial` a target of values to animate from when the element is first rendered.\n * - `exit` a target of values to animate to when the element is removed. The element must be a direct child of the `<Presence>` component.\n *\n * @example\n * ```tsx\n * <Motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}/>\n * ```\n *\n * Interaction animation props:\n *\n * - `inView` animation target for when the element is in view\n * - `hover` animate when hovered\n * - `press` animate when pressed\n *\n * @example\n * ```tsx\n * <Motion.div hover={{ scale: 1.2 }} press={{ scale: 0.9 }}/>\n * ```\n */\nexport const Motion = new Proxy(MotionComponent, {\n  get:\n    (_, tag: string): MotionProxyComponent<any> =>\n    (props) => {\n      delete props.tag\n      return <MotionComponent {...props} tag={tag} />\n    },\n}) as MotionProxy\n","import {\n  FlowComponent,\n  createSignal,\n  children,\n  createComputed,\n  untrack,\n  onMount,\n  on,\n  createMemo,\n  onCleanup,\n  batch,\n} from \"solid-js\"\nimport type { ResolvedChildren } from \"solid-js/types/reactive/signal\"\nimport { mountedStates } from \"@motionone/dom\"\nimport { PresenceContext, ParentContext } from \"./context\"\nimport { isServer } from \"solid-js/web\"\n\nconst getSingleElement = (resolved: ResolvedChildren): Element | undefined => {\n  resolved = Array.isArray(resolved) ? resolved[0] : resolved\n  return resolved instanceof Element ? resolved : undefined\n}\n\nconst addCompleteListener = (el: Element, fn: VoidFunction) => {\n  const options: AddEventListenerOptions = { once: true }\n  el.addEventListener(\"motioncomplete\", fn, options)\n  onCleanup(el.removeEventListener.bind(el, \"motioncomplete\", fn, options))\n}\n\n/**\n * Perform exit/enter trantisions of children `<Motion>` components.\n *\n * accepts props:\n * - `initial` – *(Defaults to `true`)* – If `false`, will disable the first animation on all child `Motion` elements the first time `Presence` is rendered.\n * - `exitBeforeEnter` – *(Defaults to `false`)* – If `true`, `Presence` will wait for the exiting element to finish animating out before animating in the next one.\n *\n * @example\n * ```tsx\n * <Presence exitBeforeEnter>\n *   <Show when={toggle()}>\n *     <Motion.div\n *       initial={{ opacity: 0 }}\n *       animate={{ opacity: 1 }}\n *       exit={{ opacity: 0 }}\n *     />\n *   </Show>\n * </Presence>\n * ```\n */\nexport const Presence: FlowComponent<{\n  initial?: boolean\n  exitBeforeEnter?: boolean\n}> = (props) => {\n  let { initial = true } = props\n  onMount(() => (initial = true))\n\n  let exiting = false\n  let mounts: VoidFunction[] = []\n  let newUnmounts: VoidFunction[] = []\n  let exitUnmounts: VoidFunction[] = []\n\n  onCleanup(() => {\n    exitUnmounts.concat(newUnmounts).forEach((f) => f())\n    newUnmounts = exitUnmounts = mounts = []\n  })\n\n  return (\n    <PresenceContext.Provider\n      value={{\n        addCleanup: (fn) => newUnmounts.push(fn),\n        addMount: (fn) => mounts.push(fn),\n        initial: () => initial,\n      }}\n    >\n      <ParentContext.Provider value={undefined}>\n        {untrack(() => {\n          if (isServer) return props.children\n\n          // children need to be accessed under a context provider\n          const resolved = children(() => props.children)\n          const resolvedChild = createMemo(() => getSingleElement(resolved()))\n          const [el, setEl] = createSignal<Element>()\n          const [el2, setEl2] = createSignal<Element>()\n\n          createComputed(\n            on(resolvedChild, (newEl) => {\n              exitUnmounts.push(...newUnmounts)\n              newUnmounts = []\n\n              batch(() => {\n                // exit -> enter\n                if (props.exitBeforeEnter) {\n                  setEl()\n                  exitTransition(() => !exiting && enterTransition(newEl))\n                }\n                // exit & enter\n                else {\n                  enterTransition(newEl)\n                  exitTransition()\n                }\n              })\n            })\n          )\n\n          return [el, el2]\n\n          function enterTransition(el?: Element) {\n            setEl(el)\n            mounts.forEach((f) => f())\n            mounts = []\n          }\n\n          function exitTransition(done?: VoidFunction) {\n            const complete = () => {\n              setEl2()\n              exitUnmounts.forEach((f) => f())\n              exitUnmounts = []\n              done?.()\n            }\n\n            const exitEl = setEl2(el() ?? el2())\n            if (!exitEl) return complete()\n            const state = mountedStates.get(exitEl)\n            if (!state || !(state.getOptions() as any).exit) return complete()\n\n            state.setActive(\"exit\", (exiting = true))\n            addCompleteListener(exitEl, () => {\n              exiting = false\n              complete()\n            })\n          }\n        })}\n      </ParentContext.Provider>\n    </PresenceContext.Provider>\n  )\n}\n"],"names":["defaultPresenceContextState","initial","addCleanup","onCleanup","addMount","onMount","ParentContext","createContext","PresenceContext","createAndBindMotionState","target","options","presenceState","parentState","state","createMotionState","runWithOwner","bind","getOwner","mount","createEffect","update","createMotion","getOptions","isFunction","styles","createStyles","getTarget","key","style","set","motion","el","props","useContext","MotionComponent","attrs","splitProps","root","_$createComponent","Dynamic","_$mergeProps","ref","untrack","tag","_$memo","combineStyle","onMotionStart","onMotionComplete","onHoverStart","onHoverEnd","onPressStart","onPressEnd","onViewEnter","onViewLeave","Motion","Proxy","get","_","getSingleElement","resolved","Array","isArray","Element","undefined","addCompleteListener","fn","once","addEventListener","removeEventListener","Presence","exiting","mounts","newUnmounts","exitUnmounts","concat","forEach","f","push","isServer","children","resolvedChild","createMemo","setEl","createSignal","el2","setEl2","createComputed","on","newEl","batch","exitBeforeEnter","exitTransition","enterTransition","done","complete","exitEl","mountedStates","exit","setActive"],"mappings":"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"}