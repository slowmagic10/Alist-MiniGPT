import{template as t,createComponent as e,mergeProps as n,Dynamic as i,memo as r,isServer as o}from"solid-js/web";import{createContext as a,onCleanup as s,onMount as l,useContext as c,splitProps as u,untrack as p,children as h,createMemo as d,createSignal as f,createComputed as m,on as y,batch as g,runWithOwner as v,getOwner as b,createEffect as w}from"solid-js";function E(t,e){-1===t.indexOf(e)&&t.push(e)}const O=(t,e,n)=>Math.min(Math.max(n,t),e),A={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},S=t=>"number"==typeof t,x=t=>Array.isArray(t)&&!S(t[0]);const T=(t,e,n)=>-n*t+n*e+t,D=()=>{},M=t=>t,j=(t,e,n)=>e-t==0?1:(n-t)/(e-t);function P(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=j(0,e,i);t.push(T(n,1,r))}}function k(t,e=function(t){const e=[0];return P(e,t-1),e}(t.length),n=M){const i=t.length,r=i-e.length;return r>0&&P(e,r),r=>{let o=0;for(;o<i-2&&!(r<e[o+1]);o++);let a=O(0,1,j(e[o],e[o+1],r));const s=function(t,e){return x(t)?t[((t,e,n)=>{const i=e-t;return((n-t)%i+i)%i+t})(0,t.length,e)]:t}(n,o);return a=s(a),T(t[o],t[o+1],a)}}const V=t=>Array.isArray(t)&&S(t[0]),C=t=>"object"==typeof t&&Boolean(t.createAnimation),L=t=>"function"==typeof t,R=t=>1e3*t,$=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function B(t,e,n,i){if(t===e&&n===i)return M;const r=e=>function(t,e,n,i,r){let o,a,s=0;do{a=e+(n-e)/2,o=$(a,i,r)-t,o>0?n=a:e=a}while(Math.abs(o)>1e-7&&++s<12);return a}(e,0,1,t,n);return t=>0===t||1===t?t:$(r(t),e,i)}const I={ease:B(.25,.1,.25,1),"ease-in":B(.42,0,1,1),"ease-in-out":B(.42,0,.58,1),"ease-out":B(0,0,.58,1)},q=/\((.*?)\)/;function U(t){if(L(t))return t;if(V(t))return B(...t);if(I[t])return I[t];if(t.startsWith("steps")){const e=q.exec(t);if(e){const t=e[1].split(",");return((t,e="end")=>n=>{const i=(n="end"===e?Math.min(n,.999):Math.max(n,.001))*t,r="end"===e?Math.floor(i):Math.ceil(i);return O(0,1,r/t)})(parseFloat(t[0]),t[1].trim())}}return M}class F{constructor(t,e=[0,1],{easing:n,duration:i=A.duration,delay:r=A.delay,endDelay:o=A.endDelay,repeat:a=A.repeat,offset:s,direction:l="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=M,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise(((t,e)=>{this.resolve=t,this.reject=e})),n=n||A.easing,C(n)){const t=n.createAnimation(e);n=t.easing,e=t.keyframes||e,i=t.duration||i}this.repeat=a,this.easing=x(n)?M:U(n),this.updateDuration(i);const c=k(e,s,x(n)?n.map(U):M);this.tick=e=>{var n;let i=0;i=void 0!==this.pauseTime?this.pauseTime:(e-this.startTime)*this.rate,this.t=i,i/=1e3,i=Math.max(i-r,0),"finished"===this.playState&&void 0===this.pauseTime&&(i=this.totalDuration);const a=i/this.duration;let s=Math.floor(a),u=a%1;!u&&a>=1&&(u=1),1===u&&s--;const p=s%2;("reverse"===l||"alternate"===l&&p||"alternate-reverse"===l&&!p)&&(u=1-u);const h=i>=this.totalDuration?1:Math.min(u,1),d=c(this.easing(h));t(d);void 0===this.pauseTime&&("finished"===this.playState||i>=this.totalDuration+o)?(this.playState="finished",null===(n=this.resolve)||void 0===n||n.call(this,d)):"idle"!==this.playState&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",void 0!==this.pauseTime?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",void 0!==this.frameRequestId&&cancelAnimationFrame(this.frameRequestId),null===(t=this.reject)||void 0===t||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){void 0!==this.pauseTime||0===this.rate?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}class W{setAnimation(t){this.animation=t,null==t||t.finished.then((()=>this.clearAnimation())).catch((()=>{}))}clearAnimation(){this.animation=this.generator=void 0}}const _=new WeakMap;function z(t){return _.has(t)||_.set(t,{transforms:[],values:new Map}),_.get(t)}const H=["","X","Y","Z"],N={x:"translateX",y:"translateY",z:"translateZ"},K={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},X={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:K,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:M},skew:K},Y=new Map,Z=t=>`--motion-${t}`,G=["x","y","z"];["translate","scale","rotate","skew"].forEach((t=>{H.forEach((e=>{G.push(t+e),Y.set(Z(t+e),X[t])}))}));const J=(t,e)=>G.indexOf(t)-G.indexOf(e),Q=new Set(G),tt=t=>Q.has(t),et=t=>t.sort(J).reduce(nt,"").trim(),nt=(t,e)=>`${t} ${e}(var(${Z(e)}))`,it=t=>t.startsWith("--"),rt=new Set;const ot=(t,e)=>document.createElement("div").animate(t,e),at={cssRegisterProperty:()=>"undefined"!=typeof CSS&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{ot({opacity:[1]})}catch(t){return!1}return!0},finished:()=>Boolean(ot({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{ot({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0}},st={},lt={};for(const t in at)lt[t]=()=>(void 0===st[t]&&(st[t]=at[t]()),st[t]);const ct=(t,e)=>L(t)?lt.linearEasing()?`linear(${((t,e)=>{let n="";const i=Math.round(e/.015);for(let e=0;e<i;e++)n+=t(j(0,i-1,e))+", ";return n.substring(0,n.length-2)})(t,e)})`:A.easing:V(t)?ut(t):t,ut=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`;function pt(t){return N[t]&&(t=N[t]),tt(t)?Z(t):t}const ht=(t,e)=>{e=pt(e);let n=it(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!n&&0!==n){const t=Y.get(e);t&&(n=t.initialValue)}return n},dt=(t,e,n)=>{e=pt(e),it(e)?t.style.setProperty(e,n):t.style[e]=n};function ft(t,e,n,i={},r){const o=window.__MOTION_DEV_TOOLS_RECORD,a=!1!==i.record&&o;let s,{duration:l=A.duration,delay:c=A.delay,endDelay:u=A.endDelay,repeat:p=A.repeat,easing:h=A.easing,direction:d,offset:f,allowWebkitAcceleration:m=!1}=i;const y=z(t),g=tt(e);let v=lt.waapi();g&&((t,e)=>{N[e]&&(e=N[e]);const{transforms:n}=z(t);E(n,e),t.style.transform=et(n)})(t,e);const b=pt(e),w=function(t,e){return t.has(e)||t.set(e,new W),t.get(e)}(y.values,b),O=Y.get(b);return function(t,e=!0){if(t&&"finished"!==t.playState)try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch(t){}}(w.animation,!(C(h)&&w.generator)&&!1!==i.record),()=>{const y=()=>{var e,n;return null!==(n=null!==(e=ht(t,b))&&void 0!==e?e:null==O?void 0:O.initialValue)&&void 0!==n?n:0};let E=function(t,e){for(let n=0;n<t.length;n++)null===t[n]&&(t[n]=n?t[n-1]:e());return t}((t=>Array.isArray(t)?t:[t])(n),y);const A=function(t,e){var n;let i=(null==e?void 0:e.toDefaultUnit)||M;const r=t[t.length-1];if("string"==typeof r){const t=(null===(n=r.match(/(-?[\d.]+)([a-z%]*)/))||void 0===n?void 0:n[2])||"";t&&(i=e=>e+t)}return i}(E,O);if(C(h)){const t=h.createAnimation(E,"opacity"!==e,y,b,w);h=t.easing,E=t.keyframes||E,l=t.duration||l}if(it(b)&&(lt.cssRegisterProperty()?function(t){if(!rt.has(t)){rt.add(t);try{const{syntax:e,initialValue:n}=Y.has(t)?Y.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:n})}catch(t){}}}(b):v=!1),g&&!lt.linearEasing()&&(L(h)||x(h)&&h.some(L))&&(v=!1),v){O&&(E=E.map((t=>S(t)?O.toDefaultUnit(t):t))),1!==E.length||lt.partialKeyframes()&&!a||E.unshift(y());const e={delay:R(c),duration:R(l),endDelay:R(u),easing:x(h)?void 0:ct(h,l),direction:d,iterations:p+1,fill:"both"};s=t.animate({[b]:E,offset:f,easing:x(h)?h.map((t=>ct(t,l))):void 0},e),s.finished||(s.finished=new Promise(((t,e)=>{s.onfinish=t,s.oncancel=e})));const n=E[E.length-1];s.finished.then((()=>{dt(t,b,n),s.cancel()})).catch(D),m||(s.playbackRate=1.000001)}else if(r&&g)E=E.map((t=>"string"==typeof t?parseFloat(t):t)),1===E.length&&E.unshift(parseFloat(y())),s=new r((e=>{dt(t,b,A?A(e):e)}),E,Object.assign(Object.assign({},i),{duration:l,easing:h}));else{const e=E[E.length-1];dt(t,b,O&&S(e)?O.toDefaultUnit(e):e)}return a&&o(t,e,E,{duration:l,delay:c,easing:h,repeat:p,offset:f},"motion-one"),w.setAnimation(s),s}}const mt=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function yt(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}var gt=function(){};"production"!==process.env.NODE_ENV&&(gt=function(t,e){if(!t)throw new Error(e)});const vt={any:0,all:1};function bt(t,e,{root:n,margin:i,amount:r="any"}={}){if("undefined"==typeof IntersectionObserver)return()=>{};const o=function(t,e){var n;return"string"==typeof t?e?(null!==(n=e[t])&&void 0!==n||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}(t),a=new WeakMap,s=new IntersectionObserver((t=>{t.forEach((t=>{const n=a.get(t.target);if(t.isIntersecting!==Boolean(n))if(t.isIntersecting){const n=e(t);L(n)?a.set(t.target,n):s.unobserve(t.target)}else n&&(n(t),a.delete(t.target))}))}),{root:n,rootMargin:i,threshold:"number"==typeof r?r:vt[r]});return o.forEach((t=>s.observe(t))),()=>s.disconnect()}function wt(t,e){return function(t){return"object"==typeof t}(t)?t:t&&e?e[t]:void 0}let Et;function Ot(){if(!Et)return;const t=Et.sort(St).map(xt);t.forEach(Tt),t.forEach(Tt),Et=void 0}function At(t){Et?E(Et,t):(Et=[t],requestAnimationFrame(Ot))}const St=(t,e)=>t.getDepth()-e.getDepth(),xt=t=>t.animateUpdates(),Tt=t=>t.next(),Dt=(t,e)=>new CustomEvent(t,{detail:{target:e}});function Mt(t,e,n){t.dispatchEvent(new CustomEvent(e,{detail:{originalEvent:n}}))}function jt(t,e,n){t.dispatchEvent(new CustomEvent(e,{detail:{originalEntry:n}}))}const Pt=(t,e,n)=>i=>{i.pointerType&&"mouse"!==i.pointerType||(n(),Mt(t,e,i))},kt={inView:{isActive:t=>Boolean(t.inView),subscribe:(t,{enable:e,disable:n},{inViewOptions:i={}})=>{const{once:r}=i,o=yt(i,["once"]);return bt(t,(i=>{if(e(),jt(t,"viewenter",i),!r)return e=>{n(),jt(t,"viewleave",e)}}),o)}},hover:{isActive:t=>Boolean(t.hover),subscribe:(t,{enable:e,disable:n})=>{const i=Pt(t,"hoverstart",e),r=Pt(t,"hoverend",n);return t.addEventListener("pointerenter",i),t.addEventListener("pointerleave",r),()=>{t.removeEventListener("pointerenter",i),t.removeEventListener("pointerleave",r)}}},press:{isActive:t=>Boolean(t.press),subscribe:(t,{enable:e,disable:n})=>{const i=e=>{n(),Mt(t,"pressend",e),window.removeEventListener("pointerup",i)},r=n=>{e(),Mt(t,"pressstart",n),window.addEventListener("pointerup",i)};return t.addEventListener("pointerdown",r),()=>{t.removeEventListener("pointerdown",r),window.removeEventListener("pointerup",i)}}}},Vt=["initial","animate",...Object.keys(kt),"exit"],Ct=new WeakMap;function Lt(t={},e){let n,i=e?e.getDepth()+1:0;const r={initial:!0,animate:!0},o={},a={};for(const n of Vt)a[n]="string"==typeof t[n]?t[n]:null==e?void 0:e.getContext()[n];const s=!1===t.initial?"animate":"initial";let l=yt(wt(t[s]||a[s],t.variants)||{},["transition"]);const c=Object.assign({},l);const u=(t,e)=>()=>{r[t]=e,At(h)},p=()=>{for(const e in kt){const i=kt[e].isActive(t),r=o[e];i&&!r?o[e]=kt[e].subscribe(n,{enable:u(e,!0),disable:u(e,!1)},t):!i&&r&&(r(),delete o[e])}},h={update:e=>{n&&(t=e,p(),At(h))},setActive:(t,e)=>{n&&(r[t]=e,At(h))},animateUpdates:function*(){var e,i;const o=l;l={};const a={};for(const n of Vt){if(!r[n])continue;const o=wt(t[n]);if(o)for(const n in o)"transition"!==n&&(l[n]=o[n],a[n]=mt(null!==(i=null!==(e=o.transition)&&void 0!==e?e:t.transition)&&void 0!==i?i:{},n))}const s=new Set([...Object.keys(l),...Object.keys(o)]),u=[];s.forEach((t=>{var e,i,r;void 0===l[t]&&(l[t]=c[t]),i=o[t],r=l[t],typeof i==typeof r&&(Array.isArray(i)&&Array.isArray(r)?function(t,e){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}(i,r):i===r)||(null!==(e=c[t])&&void 0!==e||(c[t]=ht(n,t)),u.push(ft(n,t,l[t],a[t],F)))})),yield;const p=u.map((t=>t())).filter(Boolean);if(!p.length)return;const h=l;n.dispatchEvent(Dt("motionstart",h)),Promise.all(p.map((t=>t.finished))).then((()=>{n.dispatchEvent(Dt("motioncomplete",h))})).catch(D)},getDepth:()=>i,getTarget:()=>l,getOptions:()=>t,getContext:()=>a,mount:t=>(gt(Boolean(t),"Animation state must be mounted with valid Element"),n=t,Ct.set(n,h),p(),()=>{Ct.delete(n),function(t){Et&&function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(Et,t)}(h);for(const t in o)o[t]()}),isMounted:()=>Boolean(n)};return h}function Rt(t){const e={},n=[];for(let i in t){const r=t[i];tt(i)&&(N[i]&&(i=N[i]),n.push(i),i=Z(i));let o=Array.isArray(r)?r[0]:r;const a=Y.get(i);a&&(o=S(r)?a.toDefaultUnit(r):r),e[i]=o}return n.length&&(e.transform=et(n)),e}t('<label><input type="checkbox"> <span></span> </label>',5),t('<label><span></span> <input type="number"> </label>',5),t('<label><span></span> <input type="text"> </label>',5),t("<label><span></span> <select></select> </label>",6),t('<option>"options missing"</option>',2),t("<option></option>",2);const $t=/([^:; ]*):\s*([^;]*)/g;function Bt(t){const e={};let n;for(;n=$t.exec(t);)e[n[1]]=n[2];return e}const It={initial:()=>!0,addCleanup:s,addMount:l},qt=a(),Ut=a(It);function Ft(t,e,n,i){const{addCleanup:r,addMount:o,initial:a}=n,s=Lt(a()?e():{...e(),initial:!1},i);return o(v.bind(void 0,b(),(()=>{r(s.mount(t())),w((()=>s.update(e())))}))),s}function Wt(t,e,n=It){const i=Ft((()=>t),(()=>L(e)?e():e),n),r=Rt(i.getTarget());for(const e in r)dt(t,e,r[e]);return i}function _t(t,e){Wt(t,e,c(Ut))}const zt=t=>{const[o,,a]=u(t,["initial","animate","inView","inViewOptions","hover","press","variants","transition","exit"],["tag","ref","style","onMotionStart","onMotionComplete","onHoverStart","onHoverEnd","onPressStart","onPressEnd","onViewEnter","onViewLeave"]),s=Ft((()=>h),(()=>({...o})),c(Ut),c(qt)),l=Rt(s.getTarget());let h;return e(qt.Provider,{value:s,get children(){return e(i,n({ref:e=>{h=e,t.ref?.(e)},get component(){return p((()=>t.tag||"div"))},get style(){return r((()=>!!t.style),!0)()?(e=t.style,n=l,"object"==typeof e&&"object"==typeof n?{...e,...n}:"string"==typeof e&&"string"==typeof n?`${e};${n}`:{..."object"==typeof e?e:Bt(e),..."object"==typeof n?n:Bt(n)}):l;var e,n},get"on:motionstart"(){return t.onMotionStart},get"on:motioncomplete"(){return t.onMotionComplete},get"on:hoverstart"(){return t.onHoverStart},get"on:hoverend"(){return t.onHoverEnd},get"on:pressstart"(){return t.onPressStart},get"on:pressend"(){return t.onPressEnd},get"on:viewenter"(){return t.onViewEnter},get"on:viewleave"(){return t.onViewLeave}},a))}})},Ht=new Proxy(zt,{get:(t,i)=>t=>(delete t.tag,e(zt,n(t,{tag:i})))}),Nt=t=>{let{initial:n=!0}=t;l((()=>n=!0));let i=!1,r=[],a=[],c=[];return s((()=>{c.concat(a).forEach((t=>t())),a=c=r=[]})),e(Ut.Provider,{value:{addCleanup:t=>a.push(t),addMount:t=>r.push(t),initial:()=>n},get children(){return e(qt.Provider,{value:void 0,get children(){return p((()=>{if(o)return t.children;const e=h((()=>t.children)),n=d((()=>(t=>(t=Array.isArray(t)?t[0]:t)instanceof Element?t:void 0)(e()))),[l,u]=f(),[p,v]=f();return m(y(n,(e=>{c.push(...a),a=[],g((()=>{t.exitBeforeEnter?(u(),w((()=>!i&&b(e)))):(b(e),w())}))}))),[l,p];function b(t){u(t),r.forEach((t=>t())),r=[]}function w(t){const e=()=>{v(),c.forEach((t=>t())),c=[],t?.()},n=v(l()??p());if(!n)return e();const r=Ct.get(n);if(!r||!r.getOptions().exit)return e();r.setActive("exit",i=!0),((t,e)=>{const n={once:!0};t.addEventListener("motioncomplete",e,n),s(t.removeEventListener.bind(t,"motioncomplete",e,n))})(n,(()=>{i=!1,e()}))}}))}})}})};export{Ht as Motion,Nt as Presence,Ut as PresenceContext,Wt as createMotion,_t as motion};
